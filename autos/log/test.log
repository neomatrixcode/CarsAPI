  [1m[36mActiveRecord::InternalMetadata Load (2.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (4.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/brands?page=1&per_page=10" for 127.0.0.1 at 2025-03-18 00:08:39 +0000
Processing by BrandsController#index as JSON
  Parameters: {"page" => "1", "per_page" => "10"}
  [1m[36mBrand Count (2.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "brands"[0m
  [1m[36mBrand Load (0.5ms)[0m  [1m[34mSELECT "brands".* FROM "brands" LIMIT $1 OFFSET $2[0m  [["LIMIT", 10], ["OFFSET", 0]]
  [1m[36mModel Average (2.6ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 2]]
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 3]]
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 4]]
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 5]]
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 6]]
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 7]]
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 8]]
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 9]]
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 10]]
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 11]]
Completed 200 OK in 152ms (Views: 0.3ms | ActiveRecord: 19.3ms (12 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/brands" for 127.0.0.1 at 2025-03-18 00:08:40 +0000
Processing by BrandsController#create as JSON
  Parameters: {"name" => "Tesla", "brand" => {"name" => "Tesla"}}
[31mUnpermitted parameter: :brand. Context: { controller: BrandsController, action: create, request: #<ActionDispatch::Request:0x00007f20b27a5510>, params: {"name" => "Tesla", "controller" => "brands", "action" => "create", "brand" => {"name" => "Tesla"}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", "Tesla"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 7115ms (Views: 0.2ms | ActiveRecord: 2.3ms (1 query, 0 cached) | GC: 188.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/brands" for 127.0.0.1 at 2025-03-18 00:08:47 +0000
Processing by BrandsController#create as JSON
  Parameters: {"name" => "", "brand" => {"name" => ""}}
[31mUnpermitted parameter: :brand. Context: { controller: BrandsController, action: create, request: #<ActionDispatch::Request:0x00007f20b1e6a5b8>, params: {"name" => "", "controller" => "brands", "action" => "create", "brand" => {"name" => ""}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", ""], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 5ms (Views: 0.1ms | ActiveRecord: 1.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", "Test Brand"], ["LIMIT", 1]]
  [1m[36mBrand Create (1.1ms)[0m  [1m[32mINSERT INTO "brands" ("name", "average_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Test Brand"], ["average_price", nil], ["created_at", "2025-03-18 00:08:47.151940"], ["updated_at", "2025-03-18 00:08:47.151940"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/brands/64/models?page=1&per_page=10" for 127.0.0.1 at 2025-03-18 00:08:47 +0000
Processing by ModelsController#index as JSON
  Parameters: {"page" => "1", "per_page" => "10", "brand_id" => "64"}
  [1m[36mBrand Load (0.6ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  [1m[36mModel Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 64]]
  [1m[36mModel Load (0.5ms)[0m  [1m[34mSELECT "models".* FROM "models" WHERE "models"."brand_id" = $1 LIMIT $2 OFFSET $3[0m  [["brand_id", 64], ["LIMIT", 10], ["OFFSET", 0]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.4ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/brands/invalid/models" for 127.0.0.1 at 2025-03-18 00:08:47 +0000
Processing by ModelsController#index as JSON
  Parameters: {"brand_id" => "invalid"}
  [1m[36mBrand Load (0.3ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
Filter chain halted as :set_brand rendered or redirected
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", "Test Brand"], ["LIMIT", 1]]
  [1m[36mBrand Create (0.5ms)[0m  [1m[32mINSERT INTO "brands" ("name", "average_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Test Brand"], ["average_price", nil], ["created_at", "2025-03-18 00:08:47.208950"], ["updated_at", "2025-03-18 00:08:47.208950"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/brands/65/models" for 127.0.0.1 at 2025-03-18 00:08:47 +0000
Processing by ModelsController#create as JSON
  Parameters: {"name" => "Model X", "average_price" => 150000, "brand_id" => "65", "model" => {"name" => "Model X", "average_price" => 150000}}
  [1m[36mBrand Load (0.4ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
[31mUnpermitted parameters: :brand_id, :model. Context: { controller: ModelsController, action: create, request: #<ActionDispatch::Request:0x00007f20b1ea2800>, params: {"name" => "Model X", "average_price" => 150000, "controller" => "models", "action" => "create", "brand_id" => "65", "model" => {"name" => "Model X", "average_price" => 150000}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mModel Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "models" WHERE "models"."name" = $1 AND "models"."brand_id" = $2 LIMIT $3[0m  [["name", "Model X"], ["brand_id", 65], ["LIMIT", 1]]
  [1m[36mModel Create (1.1ms)[0m  [1m[32mINSERT INTO "models" ("name", "average_price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Model X"], ["average_price", 150000], ["brand_id", 65], ["created_at", "2025-03-18 00:08:47.236031"], ["updated_at", "2025-03-18 00:08:47.236031"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 24ms (Views: 0.1ms | ActiveRecord: 2.8ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", "Test Brand"], ["LIMIT", 1]]
  [1m[36mBrand Create (0.4ms)[0m  [1m[32mINSERT INTO "brands" ("name", "average_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Test Brand"], ["average_price", nil], ["created_at", "2025-03-18 00:08:47.245536"], ["updated_at", "2025-03-18 00:08:47.245536"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/brands/66/models" for 127.0.0.1 at 2025-03-18 00:08:47 +0000
Processing by ModelsController#create as JSON
  Parameters: {"name" => "", "average_price" => 50000, "brand_id" => "66", "model" => {"name" => "", "average_price" => 50000}}
  [1m[36mBrand Load (0.3ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
[31mUnpermitted parameters: :brand_id, :model. Context: { controller: ModelsController, action: create, request: #<ActionDispatch::Request:0x00007f20b1f86050>, params: {"name" => "", "average_price" => 50000, "controller" => "models", "action" => "create", "brand_id" => "66", "model" => {"name" => "", "average_price" => 50000}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mModel Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "models" WHERE "models"."name" = $1 AND "models"."brand_id" = $2 LIMIT $3[0m  [["name", ""], ["brand_id", 66], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 6ms (Views: 0.1ms | ActiveRecord: 1.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/brands/invalid/models" for 127.0.0.1 at 2025-03-18 00:08:47 +0000
Processing by ModelsController#create as JSON
  Parameters: {"name" => "Model X", "average_price" => 150000, "brand_id" => "invalid", "model" => {"name" => "Model X", "average_price" => 150000}}
  [1m[36mBrand Load (0.4ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
Filter chain halted as :set_brand rendered or redirected
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/models?greater=200000&lower=500000&page=1&per_page=10" for 127.0.0.1 at 2025-03-18 00:08:47 +0000
Processing by ModelsController#index as JSON
  Parameters: {"greater" => "200000", "lower" => "500000", "page" => "1", "per_page" => "10"}
  [1m[36mModel Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "models" WHERE (average_price > $1) AND (average_price < $2)[0m  [[nil, "200000"], [nil, "500000"]]
  [1m[36mModel Load (0.4ms)[0m  [1m[34mSELECT "models".* FROM "models" WHERE (average_price > $1) AND (average_price < $2) LIMIT $3 OFFSET $4[0m  [[nil, "200000"], [nil, "500000"], ["LIMIT", 10], ["OFFSET", 0]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", "Test Brand"], ["LIMIT", 1]]
  [1m[36mBrand Create (0.5ms)[0m  [1m[32mINSERT INTO "brands" ("name", "average_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Test Brand"], ["average_price", nil], ["created_at", "2025-03-18 00:08:47.290483"], ["updated_at", "2025-03-18 00:08:47.290483"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mModel Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "models" WHERE "models"."name" = $1 AND "models"."brand_id" = $2 LIMIT $3[0m  [["name", "Test Model"], ["brand_id", 67], ["LIMIT", 1]]
  [1m[36mModel Create (0.5ms)[0m  [1m[32mINSERT INTO "models" ("name", "average_price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Test Model"], ["average_price", 150000], ["brand_id", 67], ["created_at", "2025-03-18 00:08:47.297627"], ["updated_at", "2025-03-18 00:08:47.297627"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/models/632" for 127.0.0.1 at 2025-03-18 00:08:47 +0000
Processing by ModelsController#update as JSON
  Parameters: {"average_price" => 200000, "id" => "632", "model" => {"average_price" => 200000}}
  [1m[36mModel Load (0.6ms)[0m  [1m[34mSELECT "models".* FROM "models" WHERE "models"."id" = $1 LIMIT $2[0m  [["id", 632], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :model. Context: { controller: ModelsController, action: update, request: #<ActionDispatch::Request:0x00007f20b1fe23a0>, params: {"average_price" => 200000, "controller" => "models", "action" => "update", "id" => "632", "model" => {"average_price" => 200000}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mModel Update (0.4ms)[0m  [1m[33mUPDATE "models" SET "average_price" = $1, "updated_at" = $2 WHERE "models"."id" = $3[0m  [["average_price", 200000], ["updated_at", "2025-03-18 00:08:47.316337"], ["id", 632]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 0.1ms | ActiveRecord: 10.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", "Test Brand"], ["LIMIT", 1]]
  [1m[36mBrand Create (0.5ms)[0m  [1m[32mINSERT INTO "brands" ("name", "average_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Test Brand"], ["average_price", nil], ["created_at", "2025-03-18 00:08:47.325868"], ["updated_at", "2025-03-18 00:08:47.325868"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mModel Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "models" WHERE "models"."name" = $1 AND "models"."brand_id" = $2 LIMIT $3[0m  [["name", "Test Model"], ["brand_id", 68], ["LIMIT", 1]]
  [1m[36mModel Create (0.3ms)[0m  [1m[32mINSERT INTO "models" ("name", "average_price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Test Model"], ["average_price", 150000], ["brand_id", 68], ["created_at", "2025-03-18 00:08:47.332292"], ["updated_at", "2025-03-18 00:08:47.332292"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/models/633" for 127.0.0.1 at 2025-03-18 00:08:47 +0000
Processing by ModelsController#update as JSON
  Parameters: {"average_price" => 50000, "id" => "633", "model" => {"average_price" => 50000}}
  [1m[36mModel Load (0.3ms)[0m  [1m[34mSELECT "models".* FROM "models" WHERE "models"."id" = $1 LIMIT $2[0m  [["id", 633], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :model. Context: { controller: ModelsController, action: update, request: #<ActionDispatch::Request:0x00007f20b205ce48>, params: {"average_price" => 50000, "controller" => "models", "action" => "update", "id" => "633", "model" => {"average_price" => 50000}} }[0m
Completed 422 Unprocessable Content in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started PUT "/models/invalid" for 127.0.0.1 at 2025-03-18 00:08:47 +0000
Processing by ModelsController#update as JSON
  Parameters: {"average_price" => 200000, "id" => "invalid", "model" => {"average_price" => 200000}}
  [1m[36mModel Load (0.3ms)[0m  [1m[34mSELECT "models".* FROM "models" WHERE "models"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
Filter chain halted as :set_model rendered or redirected
Completed 404 Not Found in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Update (8.9ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2025-03-18 00:20:20.396005' WHERE "ar_internal_metadata"."key" = 'environment'[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/brands?page=1&per_page=10" for 127.0.0.1 at 2025-03-18 00:21:35 +0000
Processing by BrandsController#index as JSON
  Parameters: {"page" => "1", "per_page" => "10"}
  [1m[36mBrand Count (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "brands"[0m
  [1m[36mBrand Load (0.9ms)[0m  [1m[34mSELECT "brands".* FROM "brands" LIMIT $1 OFFSET $2[0m  [["LIMIT", 10], ["OFFSET", 0]]
  [1m[36mModel Average (3.7ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 2]]
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 3]]
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 4]]
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 5]]
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 6]]
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 7]]
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 8]]
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 9]]
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 10]]
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 11]]
Completed 200 OK in 188ms (Views: 0.3ms | ActiveRecord: 26.9ms (12 queries, 0 cached) | GC: 1.9ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/brands" for 127.0.0.1 at 2025-03-18 00:21:35 +0000
Processing by BrandsController#create as JSON
  Parameters: {"name" => "Test Brand 1742257295", "brand" => {"name" => "Test Brand 1742257295"}}
[31mUnpermitted parameter: :brand. Context: { controller: BrandsController, action: create, request: #<ActionDispatch::Request:0x00007f08a1982be0>, params: {"name" => "Test Brand 1742257295", "controller" => "brands", "action" => "create", "brand" => {"name" => "Test Brand 1742257295"}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", "Test Brand 1742257295"], ["LIMIT", 1]]
  [1m[36mBrand Create (1.4ms)[0m  [1m[32mINSERT INTO "brands" ("name", "average_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Test Brand 1742257295"], ["average_price", nil], ["created_at", "2025-03-18 00:21:35.537701"], ["updated_at", "2025-03-18 00:21:35.537701"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mModel Average (0.2ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 69]]
Completed 201 Created in 9ms (Views: 0.1ms | ActiveRecord: 3.3ms (3 queries, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/brands" for 127.0.0.1 at 2025-03-18 00:21:35 +0000
Processing by BrandsController#create as JSON
  Parameters: {"name" => "", "brand" => {"name" => ""}}
[31mUnpermitted parameter: :brand. Context: { controller: BrandsController, action: create, request: #<ActionDispatch::Request:0x00007f08a1ba4068>, params: {"name" => "", "controller" => "brands", "action" => "create", "brand" => {"name" => ""}} }[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", ""], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 1295ms (Views: 0.2ms | ActiveRecord: 1.9ms (1 query, 0 cached) | GC: 35.1ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", "Test Brand"], ["LIMIT", 1]]
  [1m[36mBrand Create (0.6ms)[0m  [1m[32mINSERT INTO "brands" ("name", "average_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Test Brand"], ["average_price", nil], ["created_at", "2025-03-18 00:21:36.850591"], ["updated_at", "2025-03-18 00:21:36.850591"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/brands/70/models?page=1&per_page=10" for 127.0.0.1 at 2025-03-18 00:21:36 +0000
Processing by ModelsController#index as JSON
  Parameters: {"page" => "1", "per_page" => "10", "brand_id" => "70"}
  [1m[36mBrand Load (0.5ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 70], ["LIMIT", 1]]
  [1m[36mModel Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 70]]
  [1m[36mModel Load (0.4ms)[0m  [1m[34mSELECT "models".* FROM "models" WHERE "models"."brand_id" = $1 LIMIT $2 OFFSET $3[0m  [["brand_id", 70], ["LIMIT", 10], ["OFFSET", 0]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.2ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/brands/invalid/models" for 127.0.0.1 at 2025-03-18 00:21:36 +0000
Processing by ModelsController#index as JSON
  Parameters: {"brand_id" => "invalid"}
  [1m[36mBrand Load (0.3ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
Filter chain halted as :set_brand rendered or redirected
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", "Test Brand"], ["LIMIT", 1]]
  [1m[36mBrand Create (0.3ms)[0m  [1m[32mINSERT INTO "brands" ("name", "average_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Test Brand"], ["average_price", nil], ["created_at", "2025-03-18 00:21:36.903106"], ["updated_at", "2025-03-18 00:21:36.903106"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/brands/71/models" for 127.0.0.1 at 2025-03-18 00:21:36 +0000
Processing by ModelsController#create as JSON
  Parameters: {"name" => "Model X", "average_price" => 150000, "brand_id" => "71", "model" => {"name" => "Model X", "average_price" => 150000}}
  [1m[36mBrand Load (0.3ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
[31mUnpermitted parameters: :brand_id, :model. Context: { controller: ModelsController, action: create, request: #<ActionDispatch::Request:0x00007f08a190b5e0>, params: {"name" => "Model X", "average_price" => 150000, "controller" => "models", "action" => "create", "brand_id" => "71", "model" => {"name" => "Model X", "average_price" => 150000}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mModel Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "models" WHERE "models"."name" = $1 AND "models"."brand_id" = $2 LIMIT $3[0m  [["name", "Model X"], ["brand_id", 71], ["LIMIT", 1]]
  [1m[36mModel Create (1.0ms)[0m  [1m[32mINSERT INTO "models" ("name", "average_price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Model X"], ["average_price", 150000], ["brand_id", 71], ["created_at", "2025-03-18 00:21:36.931197"], ["updated_at", "2025-03-18 00:21:36.931197"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 26ms (Views: 0.1ms | ActiveRecord: 2.7ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", "Test Brand"], ["LIMIT", 1]]
  [1m[36mBrand Create (0.5ms)[0m  [1m[32mINSERT INTO "brands" ("name", "average_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Test Brand"], ["average_price", nil], ["created_at", "2025-03-18 00:21:36.939975"], ["updated_at", "2025-03-18 00:21:36.939975"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/brands/72/models" for 127.0.0.1 at 2025-03-18 00:21:36 +0000
Processing by ModelsController#create as JSON
  Parameters: {"name" => "", "average_price" => 50000, "brand_id" => "72", "model" => {"name" => "", "average_price" => 50000}}
  [1m[36mBrand Load (0.3ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
[31mUnpermitted parameters: :brand_id, :model. Context: { controller: ModelsController, action: create, request: #<ActionDispatch::Request:0x00007f08a1c014c0>, params: {"name" => "", "average_price" => 50000, "controller" => "models", "action" => "create", "brand_id" => "72", "model" => {"name" => "", "average_price" => 50000}} }[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mModel Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "models" WHERE "models"."name" = $1 AND "models"."brand_id" = $2 LIMIT $3[0m  [["name", ""], ["brand_id", 72], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 6ms (Views: 0.1ms | ActiveRecord: 2.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/brands/invalid/models" for 127.0.0.1 at 2025-03-18 00:21:36 +0000
Processing by ModelsController#create as JSON
  Parameters: {"name" => "Model X", "average_price" => 150000, "brand_id" => "invalid", "model" => {"name" => "Model X", "average_price" => 150000}}
  [1m[36mBrand Load (0.3ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
Filter chain halted as :set_brand rendered or redirected
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/models?greater=&lower=&page=1&per_page=10" for 127.0.0.1 at 2025-03-18 00:21:36 +0000
Processing by ModelsController#index as JSON
  Parameters: {"greater" => "", "lower" => "", "page" => "1", "per_page" => "10"}
  [1m[36mModel Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "models"[0m
  [1m[36mModel Load (0.3ms)[0m  [1m[34mSELECT "models".* FROM "models" LIMIT $1 OFFSET $2[0m  [["LIMIT", 10], ["OFFSET", 0]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", "Test Brand"], ["LIMIT", 1]]
  [1m[36mBrand Create (0.3ms)[0m  [1m[32mINSERT INTO "brands" ("name", "average_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Test Brand"], ["average_price", nil], ["created_at", "2025-03-18 00:21:36.998276"], ["updated_at", "2025-03-18 00:21:36.998276"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mModel Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "models" WHERE "models"."name" = $1 AND "models"."brand_id" = $2 LIMIT $3[0m  [["name", "Test Model"], ["brand_id", 73], ["LIMIT", 1]]
  [1m[36mModel Create (0.3ms)[0m  [1m[32mINSERT INTO "models" ("name", "average_price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Test Model"], ["average_price", 150000], ["brand_id", 73], ["created_at", "2025-03-18 00:21:37.003026"], ["updated_at", "2025-03-18 00:21:37.003026"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/models/635" for 127.0.0.1 at 2025-03-18 00:21:37 +0000
Processing by ModelsController#update as JSON
  Parameters: {"average_price" => 200000, "id" => "635", "model" => {"average_price" => 200000}}
  [1m[36mModel Load (0.4ms)[0m  [1m[34mSELECT "models".* FROM "models" WHERE "models"."id" = $1 LIMIT $2[0m  [["id", 635], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :model. Context: { controller: ModelsController, action: update, request: #<ActionDispatch::Request:0x00007f08a059f790>, params: {"average_price" => 200000, "controller" => "models", "action" => "update", "id" => "635", "model" => {"average_price" => 200000}} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mModel Update (0.3ms)[0m  [1m[33mUPDATE "models" SET "average_price" = $1, "updated_at" = $2 WHERE "models"."id" = $3[0m  [["average_price", 200000], ["updated_at", "2025-03-18 00:21:37.018534"], ["id", 635]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 9.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", "Test Brand"], ["LIMIT", 1]]
  [1m[36mBrand Create (0.3ms)[0m  [1m[32mINSERT INTO "brands" ("name", "average_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Test Brand"], ["average_price", nil], ["created_at", "2025-03-18 00:21:37.026637"], ["updated_at", "2025-03-18 00:21:37.026637"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mModel Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "models" WHERE "models"."name" = $1 AND "models"."brand_id" = $2 LIMIT $3[0m  [["name", "Test Model"], ["brand_id", 74], ["LIMIT", 1]]
  [1m[36mModel Create (0.3ms)[0m  [1m[32mINSERT INTO "models" ("name", "average_price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Test Model"], ["average_price", 150000], ["brand_id", 74], ["created_at", "2025-03-18 00:21:37.031457"], ["updated_at", "2025-03-18 00:21:37.031457"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/models/636" for 127.0.0.1 at 2025-03-18 00:21:37 +0000
Processing by ModelsController#update as JSON
  Parameters: {"average_price" => 50000, "id" => "636", "model" => {"average_price" => 50000}}
  [1m[36mModel Load (0.3ms)[0m  [1m[34mSELECT "models".* FROM "models" WHERE "models"."id" = $1 LIMIT $2[0m  [["id", 636], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :model. Context: { controller: ModelsController, action: update, request: #<ActionDispatch::Request:0x00007f08a057b4a8>, params: {"average_price" => 50000, "controller" => "models", "action" => "update", "id" => "636", "model" => {"average_price" => 50000}} }[0m
Completed 422 Unprocessable Content in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started PUT "/models/invalid" for 127.0.0.1 at 2025-03-18 00:21:37 +0000
Processing by ModelsController#update as JSON
  Parameters: {"average_price" => 200000, "id" => "invalid", "model" => {"average_price" => 200000}}
  [1m[36mModel Load (0.3ms)[0m  [1m[34mSELECT "models".* FROM "models" WHERE "models"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
Filter chain halted as :set_model rendered or redirected
Completed 404 Not Found in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Update (8.0ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2025-03-18 00:23:36.939513' WHERE "ar_internal_metadata"."key" = 'environment'[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (2.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (760.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "nexu_backend_test"[0m
  [1m[35m (1983.7ms)[0m  [1m[35mCREATE DATABASE "nexu_backend_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (69.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands" CASCADE[0m
  [1m[35m (41.2ms)[0m  [1m[35mCREATE TABLE "brands" ("id" bigserial primary key, "name" character varying NOT NULL, "average_price" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_brands_on_name" ON "brands" ("name")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "models" CASCADE[0m
  [1m[35m (12.7ms)[0m  [1m[35mCREATE TABLE "models" ("id" bigserial primary key, "name" character varying NOT NULL, "average_price" integer NOT NULL, "brand_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT average_price_check CHECK (average_price > 100000))[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_models_on_brand_id_and_name" ON "models" ("brand_id", "name")[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE INDEX "index_models_on_brand_id" ON "models" ("brand_id")[0m
  [1m[35m (9.7ms)[0m  [1m[35mALTER TABLE "models" ADD CONSTRAINT "fk_rails_ec6eb36a24"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("id")
[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (5.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250317202632)[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250317202601);[0m
  [1m[35m (11.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (4.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-03-18 00:25:04.042003', '2025-03-18 00:25:04.042007') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '57928fd5695c67219a92965197f711a79b6509b8', '2025-03-18 00:25:04.048835', '2025-03-18 00:25:04.048837') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/brands?page=1&per_page=10" for 127.0.0.1 at 2025-03-18 00:25:04 +0000
Processing by BrandsController#index as JSON
  Parameters: {"page" => "1", "per_page" => "10"}
  [1m[36mBrand Count (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "brands"[0m
  [1m[36mBrand Load (0.6ms)[0m  [1m[34mSELECT "brands".* FROM "brands" LIMIT $1 OFFSET $2[0m  [["LIMIT", 10], ["OFFSET", 0]]
Completed 200 OK in 79ms (Views: 0.3ms | ActiveRecord: 4.9ms (2 queries, 0 cached) | GC: 0.9ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/brands" for 127.0.0.1 at 2025-03-18 00:25:04 +0000
Processing by BrandsController#create as JSON
  Parameters: {"name" => "Test Brand 1742257504", "brand" => {"name" => "Test Brand 1742257504"}}
[31mUnpermitted parameter: :brand. Context: { controller: BrandsController, action: create, request: #<ActionDispatch::Request:0x00007f9628488670>, params: {"name" => "Test Brand 1742257504", "controller" => "brands", "action" => "create", "brand" => {"name" => "Test Brand 1742257504"}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", "Test Brand 1742257504"], ["LIMIT", 1]]
  [1m[36mBrand Create (1.5ms)[0m  [1m[32mINSERT INTO "brands" ("name", "average_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Test Brand 1742257504"], ["average_price", nil], ["created_at", "2025-03-18 00:25:04.630874"], ["updated_at", "2025-03-18 00:25:04.630874"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mModel Average (2.8ms)[0m  [1m[34mSELECT AVG("models"."average_price") FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 1]]
Completed 201 Created in 75ms (Views: 0.2ms | ActiveRecord: 29.4ms (3 queries, 0 cached) | GC: 1.1ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/brands" for 127.0.0.1 at 2025-03-18 00:25:04 +0000
Processing by BrandsController#create as JSON
  Parameters: {"name" => "", "brand" => {"name" => ""}}
[31mUnpermitted parameter: :brand. Context: { controller: BrandsController, action: create, request: #<ActionDispatch::Request:0x00007f9628a756f0>, params: {"name" => "", "controller" => "brands", "action" => "create", "brand" => {"name" => ""}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", ""], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 1208ms (Views: 0.2ms | ActiveRecord: 1.4ms (1 query, 0 cached) | GC: 32.9ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", "Test Brand"], ["LIMIT", 1]]
  [1m[36mBrand Create (0.3ms)[0m  [1m[32mINSERT INTO "brands" ("name", "average_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Test Brand"], ["average_price", nil], ["created_at", "2025-03-18 00:25:05.904178"], ["updated_at", "2025-03-18 00:25:05.904178"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/brands/2/models?page=1&per_page=10" for 127.0.0.1 at 2025-03-18 00:25:05 +0000
Processing by ModelsController#index as JSON
  Parameters: {"page" => "1", "per_page" => "10", "brand_id" => "2"}
  [1m[36mBrand Load (0.5ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mModel Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "models" WHERE "models"."brand_id" = $1[0m  [["brand_id", 2]]
  [1m[36mModel Load (0.3ms)[0m  [1m[34mSELECT "models".* FROM "models" WHERE "models"."brand_id" = $1 LIMIT $2 OFFSET $3[0m  [["brand_id", 2], ["LIMIT", 10], ["OFFSET", 0]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.0ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/brands/invalid/models" for 127.0.0.1 at 2025-03-18 00:25:05 +0000
Processing by ModelsController#index as JSON
  Parameters: {"brand_id" => "invalid"}
  [1m[36mBrand Load (0.3ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
Filter chain halted as :set_brand rendered or redirected
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", "Test Brand"], ["LIMIT", 1]]
  [1m[36mBrand Create (0.4ms)[0m  [1m[32mINSERT INTO "brands" ("name", "average_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Test Brand"], ["average_price", nil], ["created_at", "2025-03-18 00:25:05.954978"], ["updated_at", "2025-03-18 00:25:05.954978"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/brands/3/models" for 127.0.0.1 at 2025-03-18 00:25:05 +0000
Processing by ModelsController#create as JSON
  Parameters: {"name" => "Model X", "average_price" => 150000, "brand_id" => "3", "model" => {"name" => "Model X", "average_price" => 150000}}
  [1m[36mBrand Load (0.3ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[31mUnpermitted parameters: :brand_id, :model. Context: { controller: ModelsController, action: create, request: #<ActionDispatch::Request:0x00007f9628a74750>, params: {"name" => "Model X", "average_price" => 150000, "controller" => "models", "action" => "create", "brand_id" => "3", "model" => {"name" => "Model X", "average_price" => 150000}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mModel Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "models" WHERE "models"."name" = $1 AND "models"."brand_id" = $2 LIMIT $3[0m  [["name", "Model X"], ["brand_id", 3], ["LIMIT", 1]]
  [1m[36mModel Create (1.9ms)[0m  [1m[32mINSERT INTO "models" ("name", "average_price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Model X"], ["average_price", 150000], ["brand_id", 3], ["created_at", "2025-03-18 00:25:05.979739"], ["updated_at", "2025-03-18 00:25:05.979739"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 23ms (Views: 0.1ms | ActiveRecord: 3.6ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", "Test Brand"], ["LIMIT", 1]]
  [1m[36mBrand Create (0.4ms)[0m  [1m[32mINSERT INTO "brands" ("name", "average_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Test Brand"], ["average_price", nil], ["created_at", "2025-03-18 00:25:05.989128"], ["updated_at", "2025-03-18 00:25:05.989128"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/brands/4/models" for 127.0.0.1 at 2025-03-18 00:25:05 +0000
Processing by ModelsController#create as JSON
  Parameters: {"name" => "", "average_price" => 50000, "brand_id" => "4", "model" => {"name" => "", "average_price" => 50000}}
  [1m[36mBrand Load (0.3ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[31mUnpermitted parameters: :brand_id, :model. Context: { controller: ModelsController, action: create, request: #<ActionDispatch::Request:0x00007f9628f25fb0>, params: {"name" => "", "average_price" => 50000, "controller" => "models", "action" => "create", "brand_id" => "4", "model" => {"name" => "", "average_price" => 50000}} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mModel Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "models" WHERE "models"."name" = $1 AND "models"."brand_id" = $2 LIMIT $3[0m  [["name", ""], ["brand_id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 6ms (Views: 0.1ms | ActiveRecord: 1.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/brands/invalid/models" for 127.0.0.1 at 2025-03-18 00:25:06 +0000
Processing by ModelsController#create as JSON
  Parameters: {"name" => "Model X", "average_price" => 150000, "brand_id" => "invalid", "model" => {"name" => "Model X", "average_price" => 150000}}
  [1m[36mBrand Load (0.3ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
Filter chain halted as :set_brand rendered or redirected
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/models?greater=&lower=&page=1&per_page=10" for 127.0.0.1 at 2025-03-18 00:25:06 +0000
Processing by ModelsController#index as JSON
  Parameters: {"greater" => "", "lower" => "", "page" => "1", "per_page" => "10"}
  [1m[36mModel Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "models"[0m
  [1m[36mModel Load (0.3ms)[0m  [1m[34mSELECT "models".* FROM "models" LIMIT $1 OFFSET $2[0m  [["LIMIT", 10], ["OFFSET", 0]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", "Test Brand"], ["LIMIT", 1]]
  [1m[36mBrand Create (0.4ms)[0m  [1m[32mINSERT INTO "brands" ("name", "average_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Test Brand"], ["average_price", nil], ["created_at", "2025-03-18 00:25:06.033709"], ["updated_at", "2025-03-18 00:25:06.033709"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mModel Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "models" WHERE "models"."name" = $1 AND "models"."brand_id" = $2 LIMIT $3[0m  [["name", "Test Model"], ["brand_id", 5], ["LIMIT", 1]]
  [1m[36mModel Create (0.3ms)[0m  [1m[32mINSERT INTO "models" ("name", "average_price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Test Model"], ["average_price", 150000], ["brand_id", 5], ["created_at", "2025-03-18 00:25:06.039043"], ["updated_at", "2025-03-18 00:25:06.039043"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/models/2" for 127.0.0.1 at 2025-03-18 00:25:06 +0000
Processing by ModelsController#update as JSON
  Parameters: {"average_price" => 200000, "id" => "2", "model" => {"average_price" => 200000}}
  [1m[36mModel Load (0.4ms)[0m  [1m[34mSELECT "models".* FROM "models" WHERE "models"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :model. Context: { controller: ModelsController, action: update, request: #<ActionDispatch::Request:0x00007f96234e4880>, params: {"average_price" => 200000, "controller" => "models", "action" => "update", "id" => "2", "model" => {"average_price" => 200000}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mModel Update (0.3ms)[0m  [1m[33mUPDATE "models" SET "average_price" = $1, "updated_at" = $2 WHERE "models"."id" = $3[0m  [["average_price", 200000], ["updated_at", "2025-03-18 00:25:06.054880"], ["id", 2]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 9.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBrand Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "brands" WHERE "brands"."name" = $1 LIMIT $2[0m  [["name", "Test Brand"], ["LIMIT", 1]]
  [1m[36mBrand Create (0.4ms)[0m  [1m[32mINSERT INTO "brands" ("name", "average_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Test Brand"], ["average_price", nil], ["created_at", "2025-03-18 00:25:06.062909"], ["updated_at", "2025-03-18 00:25:06.062909"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mModel Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "models" WHERE "models"."name" = $1 AND "models"."brand_id" = $2 LIMIT $3[0m  [["name", "Test Model"], ["brand_id", 6], ["LIMIT", 1]]
  [1m[36mModel Create (0.3ms)[0m  [1m[32mINSERT INTO "models" ("name", "average_price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Test Model"], ["average_price", 150000], ["brand_id", 6], ["created_at", "2025-03-18 00:25:06.068011"], ["updated_at", "2025-03-18 00:25:06.068011"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/models/3" for 127.0.0.1 at 2025-03-18 00:25:06 +0000
Processing by ModelsController#update as JSON
  Parameters: {"average_price" => 50000, "id" => "3", "model" => {"average_price" => 50000}}
  [1m[36mModel Load (0.2ms)[0m  [1m[34mSELECT "models".* FROM "models" WHERE "models"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :model. Context: { controller: ModelsController, action: update, request: #<ActionDispatch::Request:0x00007f96234b0468>, params: {"average_price" => 50000, "controller" => "models", "action" => "update", "id" => "3", "model" => {"average_price" => 50000}} }[0m
Completed 422 Unprocessable Content in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started PUT "/models/invalid" for 127.0.0.1 at 2025-03-18 00:25:06 +0000
Processing by ModelsController#update as JSON
  Parameters: {"average_price" => 200000, "id" => "invalid", "model" => {"average_price" => 200000}}
  [1m[36mModel Load (0.3ms)[0m  [1m[34mSELECT "models".* FROM "models" WHERE "models"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
Filter chain halted as :set_model rendered or redirected
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/models?greater=&lower=&page=1&per_page=10" for 127.0.0.1 at 2025-03-18 00:25:06 +0000
Processing by ModelsController#index as HTML
  Parameters: {"greater" => "", "lower" => "", "page" => "1", "per_page" => "10"}
  [1m[36mModel Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "models"[0m
  [1m[36mModel Load (0.2ms)[0m  [1m[34mSELECT "models".* FROM "models" LIMIT $1 OFFSET $2[0m  [["LIMIT", 10], ["OFFSET", 0]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
